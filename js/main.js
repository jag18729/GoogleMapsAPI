var R=[{id:1,name:"Swing #1",code:"HIT1",lat:34.2452183,lng:-118.5270635,bounds:{north:34.2462,south:34.2442,east:-118.5258,west:-118.5283},foulZones:[{name:"Foul Ball - Soccer Field North",north:34.247,south:34.2462,east:-118.5265,west:-118.528}],difficulty:"easy",hint:"\u26BE Hit OUTSIDE the field for a HOMERUN!"},{id:2,name:"Swing #2",code:"HIT2",lat:34.2452183,lng:-118.5270635,bounds:{north:34.2462,south:34.2442,east:-118.5258,west:-118.5283},foulZones:[{name:"Foul Ball - Buildings North",north:34.2468,south:34.2462,east:-118.526,west:-118.5278}],difficulty:"easy",hint:"\u26BE Aim for the fence - hit OUTSIDE!"},{id:3,name:"Swing #3",code:"HIT3",lat:34.2452183,lng:-118.5270635,bounds:{north:34.2462,south:34.2442,east:-118.5258,west:-118.5283},foulZones:[{name:"Foul Ball - West Side Buildings",north:34.2465,south:34.244,east:-118.5283,west:-118.5295}],difficulty:"medium",hint:"\u26BE Clear the field! HOMERUN zone!"},{id:4,name:"Swing #4",code:"HIT4",lat:34.2452183,lng:-118.5270635,bounds:{north:34.2462,south:34.2442,east:-118.5258,west:-118.5283},foulZones:[{name:"Foul Ball - East Side",north:34.246,south:34.2445,east:-118.525,west:-118.5258}],difficulty:"medium",hint:"\u26BE Watch out for foul territory!"},{id:5,name:"Swing #5",code:"HIT5",lat:34.2452183,lng:-118.5270635,bounds:{north:34.2462,south:34.2442,east:-118.5258,west:-118.5283},foulZones:[{name:"Foul Ball - South Side",north:34.2442,south:34.2432,east:-118.527,west:-118.5275}],difficulty:"hard",hint:"\u26BE Final swing - go for glory!"},{id:6,name:"Swing #6",code:"HIT6",lat:34.2452183,lng:-118.5270635,bounds:{north:34.2462,south:34.2442,east:-118.5258,west:-118.5283},foulZones:[{name:"Foul Ball - North Buildings",north:34.247,south:34.2462,east:-118.527,west:-118.528}],difficulty:"hard",hint:"\u26BE Can you keep the streak going?"},{id:7,name:"Swing #7",code:"HIT7",lat:34.2452183,lng:-118.5270635,bounds:{north:34.2462,south:34.2442,east:-118.5258,west:-118.5283},foulZones:[{name:"Foul Ball - West Campus",north:34.2465,south:34.244,east:-118.5285,west:-118.5295}],difficulty:"hard",hint:"\u26BE Swing 7 - dominate!"},{id:8,name:"Swing #8",code:"HIT8",lat:34.2452183,lng:-118.5270635,bounds:{north:34.2462,south:34.2442,east:-118.5258,west:-118.5283},foulZones:[{name:"Foul Ball - Complex Areas",north:34.2468,south:34.2438,east:-118.525,west:-118.5295}],difficulty:"hard",hint:"\u26BE Challenge round - 8 hits!"},{id:9,name:"Swing #9",code:"HIT9",lat:34.2452183,lng:-118.5270635,bounds:{north:34.2462,south:34.2442,east:-118.5258,west:-118.5283},foulZones:[{name:"Foul Ball - All Around",north:34.247,south:34.2435,east:-118.5245,west:-118.53}],difficulty:"hard",hint:"\u26BE You're on fire! 9 swings!"},{id:10,name:"Swing #10 - ULTIMATE",code:"HIT10",lat:34.2452183,lng:-118.5270635,bounds:{north:34.2462,south:34.2442,east:-118.5258,west:-118.5283},foulZones:[{name:"Foul Ball - Grand Slam Zone",north:34.2468,south:34.2438,east:-118.525,west:-118.529}],difficulty:"hard",hint:"\u26BE GRAND SLAM! Go big or go home!"}],H={lat:34.2452183,lng:-118.5270635},D={zoom:16,disableDefaultUI:!1,gestureHandling:"none",zoomControl:!1,scrollwheel:!1,disableDoubleClickZoom:!1,draggable:!1};class f{constructor(h){this.locations=h,this.currentQuestionIndex=0,this.score=0,this.answers=[],this.startTime=null,this.endTime=null,this.isGameActive=!1}getCurrentLocation(){return this.locations[this.currentQuestionIndex]}submitAnswer(h,G){const V=this.getCurrentLocation(),X=V.foulZones&&V.foulZones.some((K)=>this.isWithinBounds(h,G,K)),F=!this.isWithinBounds(h,G,V.bounds),J=F&&!X;if(this.answers.push({location:V,userClick:{lat:h,lng:G},correct:J,isFoulBall:X,isStrikeout:!F,timestamp:Date.now()}),J)this.score++;return J}isWithinBounds(h,G,V){return h<=V.north&&h>=V.south&&G<=V.east&&G>=V.west}nextQuestion(){return this.currentQuestionIndex++,this.currentQuestionIndex<this.locations.length}isGameComplete(){return this.currentQuestionIndex>=this.locations.length}getElapsedTime(){if(!this.startTime)return 0;const h=this.endTime||Date.now();return Math.floor((h-this.startTime)/1000)}startGame(){this.startTime=Date.now(),this.isGameActive=!0}endGame(){this.endTime=Date.now(),this.isGameActive=!1}}class v{constructor(h){this.mapElement=document.getElementById(h),this.map=null,this.overlays=[],this.markers=[]}async initialize(){this.map=new google.maps.Map(this.mapElement,{center:H,...D})}addDoubleClickListener(h){google.maps.event.addListener(this.map,"dblclick",(G)=>{h(G.latLng.lat(),G.latLng.lng())})}showOverlay(h,G){const V=G?"#00FF00":"#FF0000",F=new google.maps.Rectangle({bounds:{north:h.north,south:h.south,east:h.east,west:h.west},fillColor:V,fillOpacity:0.4,strokeColor:V,strokeOpacity:0.8,strokeWeight:2,map:this.map});return this.overlays.push(F),this.animateOverlay(F),F}animateOverlay(h){let G=0;const V=setInterval(()=>{if(G+=0.05,h.setOptions({fillOpacity:G}),G>=0.4)clearInterval(V)},30)}clearOverlays(){this.overlays.forEach((h)=>h.setMap(null)),this.overlays=[]}addMarker(h,G,V){const X=new google.maps.Marker({position:{lat:h,lng:G},map:this.map,label:V,animation:google.maps.Animation.DROP});return this.markers.push(X),X}clearMarkers(){this.markers.forEach((h)=>h.setMap(null)),this.markers=[]}}class P{constructor(){this.promptElement=$("#game-prompt"),this.scoreElement=$("#score-display"),this.timerElement=$("#timer-display"),this.feedbackElement=$("#feedback"),this.resultsElement=$("#results")}showPrompt(h){this.promptElement.html(`
      <h2>\uD83C\uDFAF Hit a HOMERUN!</h2>
      <h3 class="location-name">${h}</h3>
      <p style="font-size: 1.1rem; margin-top: 10px;">Double-click to hit the ball OUTSIDE the field!</p>
    `),this.promptElement.addClass("pulse-animation"),setTimeout(()=>{this.promptElement.removeClass("pulse-animation")},600)}showFeedback(h,G,V){let X="",F="";if(V&&V.isFoulBall)X='<span class="foul">\u26BE FOUL BALL! Hit into foul territory!</span>',F="foul-feedback";else if(V&&V.isStrikeout)X='<span class="strikeout">\u274C STRIKEOUT! Ball landed in the field!</span>',F="strikeout-feedback";else if(h)X='<span class="correct">\u26BE HOMERUN! Ball went over the fence!</span>',F="correct-feedback";else X=`<span class="incorrect">\u26A0\uFE0F OUT! Ball didn't go far enough!</span>`,F="incorrect-feedback";this.feedbackElement.html(X),this.feedbackElement.addClass(F),setTimeout(()=>{this.feedbackElement.removeClass("correct-feedback incorrect-feedback foul-feedback strikeout-feedback")},2000)}updateScore(h,G){this.scoreElement.text(`Homeruns: ${h}/${G}`)}updateTimer(h){const G=Math.floor(h/60),V=h%60;this.timerElement.text(`Time: ${G}:${V.toString().padStart(2,"0")}`)}showResults(h,G,V,X){const F=h/G*100,J=X.filter((W)=>W.isStrikeout).length,K=X.filter((W)=>W.isFoulBall).length,Y=`
      <div class="results-container">
        <h2>\u26BE Game Over!</h2>
        <div class="final-score">
          <h3>${h} Homeruns \u2022 ${J} Strikeouts \u2022 ${K} Fouls</h3>
          <p>Batting Average: ${F.toFixed(1)}%</p>
          <p>Time: ${this.formatTime(V)}</p>
        </div>
        <div class="answer-breakdown">
          <h4>Play-by-Play</h4>
          ${this.renderAnswerBreakdown(X)}
        </div>
        <div class="field-reference">
          <p>\uD83D\uDCCD <a href="https://www.google.com/maps/place/Matador+Baseball+Field/@34.2452182,-118.5273758,18z/data=!4m15!1m8!3m7!1s0x80c29af9287eb329:0xab822cfc9f28f0a3!2sMatador+Baseball+Field!8m2!3d34.2452183!4d-118.5270635!10e5!16s%2Fm%2F0cc95m8!3m5!1s0x80c29af9287eb329:0xab822cfc9f28f0a3!8m2!3d34.2452183!4d-118.5270635!16s%2Fm%2F0cc95m8!5m1!1e4?entry=ttu" target="_blank">Visit Matador Baseball Field on Google Maps</a></p>
        </div>
        <div class="button-group">
          <button id="restart-btn" class="btn-primary">\uD83D\uDD04 Play Again</button>
          <button id="retry-btn" class="btn-retry">\u21BB Retry Last Game</button>
          <button id="view-highscores-btn" class="btn-secondary">\uD83C\uDFC6 View High Scores</button>
        </div>
      </div>
    `;this.resultsElement.html(Y),this.resultsElement.show(),this.resultsElement.addClass("slide-in-animation")}renderAnswerBreakdown(h){return h.map((G,V)=>{let X="answer-item",F="",J="";if(G.isFoulBall)X+=" foul",F="\u26BE FOUL",J="Foul Ball - Hit into foul territory";else if(G.isStrikeout)X+=" strikeout",F="\u274C STRIKE",J="Strikeout - Ball stayed in field";else if(G.correct)X+=" correct",F="\u26BE HOME RUN",J="Homerun - Ball cleared the field!";else X+=" incorrect",F="\u26A0\uFE0F OUT",J="Out - Better luck next time!";return`
          <div class="${X}" title="${J}">
            <span class="answer-number">#${V+1}</span>
            <span class="location-name">${G.location.name}</span>
            <span class="answer-status">${F}</span>
          </div>
        `}).join("")}formatTime(h){const G=Math.floor(h/60),V=h%60;return`${G}m ${V}s`}hideResults(){this.resultsElement.hide()}showLoadingSpinner(){$("#loading-spinner").show()}hideLoadingSpinner(){$("#loading-spinner").hide()}}class q{constructor(h){this.startTime=null,this.elapsedTime=0,this.intervalId=null,this.updateCallback=h,this.isRunning=!1}start(){if(this.isRunning)return;this.startTime=Date.now()-this.elapsedTime,this.isRunning=!0,this.intervalId=setInterval(()=>{this.elapsedTime=Date.now()-this.startTime;const h=Math.floor(this.elapsedTime/1000);this.updateCallback(h)},1000)}stop(){if(!this.isRunning)return;return clearInterval(this.intervalId),this.isRunning=!1,Math.floor(this.elapsedTime/1000)}reset(){this.stop(),this.elapsedTime=0,this.startTime=null,this.updateCallback(0)}getElapsedSeconds(){return Math.floor(this.elapsedTime/1000)}}class B{constructor(){this.scores=this.loadScores()}loadScores(){try{const h=localStorage.getItem("csun_maps_quiz_highscores");return h?JSON.parse(h):[]}catch(h){return console.error("Error loading high scores:",h),[]}}saveScores(){try{localStorage.setItem("csun_maps_quiz_highscores",JSON.stringify(this.scores))}catch(h){console.error("Error saving high scores:",h)}}addScore(h,G,V,X){const F={name:h,score:G,total:V,percentage:G/V*100,time:X,date:(new Date()).toISOString()};return this.scores.push(F),this.scores.sort((J,K)=>{if(K.percentage!==J.percentage)return K.percentage-J.percentage;return J.time-K.time}),this.scores=this.scores.slice(0,10),this.saveScores(),this.scores}getTopScores(h=10){return this.scores.slice(0,h)}isHighScore(h,G){if(this.scores.length<10)return!0;const V=h/G*100,X=this.scores[this.scores.length-1];return V>X.percentage}clearScores(){this.scores=[],this.saveScores()}}class z{constructor(){this.audioContext=null,this.initialized=!1}init(){if(this.initialized)return;try{const h=window.AudioContext||window.webkitAudioContext;this.audioContext=new h,this.initialized=!0}catch(h){console.log("Audio not supported")}}playCrackSound(){if(!this.audioContext)return;if(this.audioContext.state==="suspended")this.audioContext.resume();const h=this.audioContext,G=h.currentTime,V=h.createOscillator(),X=h.createGain();V.connect(X),X.connect(h.destination),V.frequency.setValueAtTime(800,G),V.frequency.exponentialRampToValueAtTime(200,G+0.05),X.gain.setValueAtTime(0.3,G),X.gain.exponentialRampToValueAtTime(0.01,G+0.1),V.start(G),V.stop(G+0.1)}playHomerunSound(){if(!this.audioContext)return;if(this.audioContext.state==="suspended")this.audioContext.resume();const h=this.audioContext,G=h.currentTime,V=h.createOscillator(),X=h.createGain();V.connect(X),X.connect(h.destination),V.frequency.setValueAtTime(400,G),V.frequency.linearRampToValueAtTime(600,G+0.1),V.frequency.linearRampToValueAtTime(500,G+0.3),X.gain.setValueAtTime(0.25,G),X.gain.exponentialRampToValueAtTime(0.01,G+0.3),V.start(G),V.stop(G+0.3)}playStrikeoutSound(){if(!this.audioContext)return;if(this.audioContext.state==="suspended")this.audioContext.resume();const h=this.audioContext,G=h.currentTime,V=h.createOscillator(),X=h.createGain();V.connect(X),X.connect(h.destination),V.frequency.setValueAtTime(300,G),V.frequency.exponentialRampToValueAtTime(100,G+0.2),X.gain.setValueAtTime(0.2,G),X.gain.exponentialRampToValueAtTime(0.01,G+0.2),V.start(G),V.stop(G+0.2)}playFoulSound(){if(!this.audioContext)return;if(this.audioContext.state==="suspended")this.audioContext.resume();const h=this.audioContext,G=h.currentTime,V=h.createOscillator(),X=h.createGain();V.connect(X),X.connect(h.destination),V.frequency.setValueAtTime(550,G),V.frequency.linearRampToValueAtTime(450,G+0.08),X.gain.setValueAtTime(0.2,G),X.gain.exponentialRampToValueAtTime(0.01,G+0.08),V.start(G),V.stop(G+0.08)}playGameOverSound(){if(!this.audioContext)return;if(this.audioContext.state==="suspended")this.audioContext.resume();const h=this.audioContext,G=h.currentTime,V=[400,350,300,250],X=0.1;V.forEach((F,J)=>{const K=G+J*X,Y=h.createOscillator(),W=h.createGain();Y.connect(W),W.connect(h.destination),Y.frequency.setValueAtTime(F,K),W.gain.setValueAtTime(0.2,K),W.gain.exponentialRampToValueAtTime(0.01,K+X),Y.start(K),Y.stop(K+X)})}}class M{constructor(){this.gameState=null,this.mapManager=null,this.ui=new P,this.timer=new q((h)=>this.ui.updateTimer(h)),this.highScoreManager=new B,this.audioManager=new z,this.lastGameState=null}async init(){try{this.ui.showLoadingSpinner(),this.audioManager.init(),this.mapManager=new v("map"),await this.mapManager.initialize(),this.setupEventListeners(),this.startNewGame(),this.ui.hideLoadingSpinner()}catch(h){console.error("Error initializing game:",h),alert("Error loading game. Please refresh the page.")}}setupEventListeners(){this.mapManager.addDoubleClickListener((h,G)=>{this.handleMapClick(h,G)}),$(document).on("click","#restart-btn",()=>{this.startNewGame()}),$(document).on("click","#retry-btn",()=>{this.retryLastGame()}),$(document).on("click","#view-highscores-btn",()=>{this.showHighScores()}),$(document).on("click","#close-highscores-btn",()=>{$(".highscores-modal").remove()})}startNewGame(){this.ui.hideResults(),this.mapManager.clearOverlays(),this.mapManager.clearMarkers(),this.gameState=new f(R),this.gameState.startGame(),this.timer.reset(),this.timer.start(),this.ui.updateScore(0,R.length),this.showCurrentQuestion()}showCurrentQuestion(){const h=this.gameState.getCurrentLocation();this.ui.showPrompt(h.name)}handleMapClick(h,G){if(!this.gameState.isGameActive)return;this.audioManager.playCrackSound();const V=this.gameState.submitAnswer(h,G),X=this.gameState.getCurrentLocation(),F=this.gameState.answers[this.gameState.answers.length-1];if(F.isFoulBall)this.audioManager.playFoulSound();else if(F.isStrikeout)this.audioManager.playStrikeoutSound();else if(V)this.audioManager.playHomerunSound();this.mapManager.showOverlay(X.bounds,V),this.ui.showFeedback(V,X.name,F),this.ui.updateScore(this.gameState.score,R.length);let J="\u2713";if(F.isFoulBall)J="\u26BE";else if(F.isStrikeout)J="\u274C";this.mapManager.addMarker(h,G,J),setTimeout(()=>{if(this.gameState.nextQuestion())this.showCurrentQuestion();else this.endGame()},2000)}endGame(){this.gameState.endGame(),this.timer.stop(),this.audioManager.playGameOverSound();const h=this.gameState.getElapsedTime();if(this.lastGameState={score:this.gameState.score,timeElapsed:h,answers:JSON.parse(JSON.stringify(this.gameState.answers))},this.ui.showResults(this.gameState.score,R.length,h,this.gameState.answers),this.highScoreManager.isHighScore(this.gameState.score,R.length))this.promptForHighScore(h)}retryLastGame(){if(!this.lastGameState){alert("No previous game to retry. Start a new game!");return}this.ui.hideResults(),this.mapManager.clearOverlays(),this.mapManager.clearMarkers(),this.gameState=new f(R),this.gameState.startGame(),this.timer.reset(),this.timer.start(),this.ui.updateScore(0,R.length),this.showCurrentQuestion()}promptForHighScore(h){const G=prompt("Congratulations! Enter your name for the high score board:");if(G)this.highScoreManager.addScore(G,this.gameState.score,R.length,h)}showHighScores(){const G=`
      <div class="highscores-modal">
        <div class="highscores-content">
          <h2>High Scores</h2>
          <table class="highscores-table">
            <thead>
              <tr>
                <th>Rank</th>
                <th>Name</th>
                <th>Score</th>
                <th>Time</th>
                <th>Date</th>
              </tr>
            </thead>
            <tbody>
              ${this.highScoreManager.getTopScores().map((V,X)=>`
                <tr>
                  <td>${X+1}</td>
                  <td>${V.name}</td>
                  <td>${V.score}/${V.total} (${V.percentage.toFixed(1)}%)</td>
                  <td>${this.ui.formatTime(V.time)}</td>
                  <td>${new Date(V.date).toLocaleDateString()}</td>
                </tr>
              `).join("")}
            </tbody>
          </table>
          <button id="close-highscores-btn" class="btn-primary">Close</button>
        </div>
      </div>
    `;$("body").append(G)}}window.initMap=function(){new M().init()};$(document).ready(()=>{if(window.google&&window.google.maps)window.initMap()});

//# debugId=3614A3659F4BB44E64756e2164756e21
